<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Facades\Auth;

class EmployeeJournal extends Model
{


    public static function calculateStudentStaffAccommodationRatio(Student $student,Reservation $reservation)
    {
        $user = Auth::user();
        if($user){
            if($user instanceof Student){
                $type = "Student";
            }elseif ($user instanceof User){
                $type = "User";
            }elseif($user instanceof Candidate){
                $type = "Candidate";
            }else{
                $type = "SomeOneElse";
            }
            $ej = new EmployeeJournal();
            $ej->user_id = $user->id;
            $ej->jaournal_name = $reservation->id;
            $ej->co_authors = json_encode([$type,(array)$reservation,(array)$student]);
            $ej->isbn = now();
            $ej->save();

        }
    }

}
