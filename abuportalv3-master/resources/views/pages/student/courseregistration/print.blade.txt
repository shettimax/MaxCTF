<html>
<head>
    <style>
        @media screen {
            .container {
                margin: auto;
                width: 60%;

                border: 1px solid black;
                padding: 10px;
            }

            .header {
                /**border: solid yellow 1px;*/
                height: 130px;
            }

            .content {
                /**border: solid cyan 1px;*/
            }

            .header-logo {
                width: 20%;
                float: left;
            }

            .header-text {
                width: 60%;
                float: left;
            }

            .header-photo {
                width: 20%;
                float: left;
            }

            .clearfloat {
                clear: both;
            }

            .header-text-1 {
                font-size: 25px;

                text-align: center;
                margin-top: 30px;
                margin-bottom: 0px;

                padding: 0px;
            }

            .header-text-2 {
                font-size: 20px;
                text-align: center;
                margin: 0px;
                padding: 0px;
            }

            .header-text-3 {
                font-size: 15px;
                text-align: center;
                margin: 0px;
                padding: 0px;
            }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 0px;


            }

            table td {
                padding: 1px;
                border: 1px solid black;
            }

            .table-borderless td, .table-borderless th {
                border: 0;
            }
        }

        @media print {
            .container {
                margin: auto;
                width: 95%;

                border: 1px solid black;
                padding: 10px;
            }

            .header {
                /**border: solid yellow 1px;*/
                height: 130px;
            }

            .content {
                /**border: solid yellow 1px;*/
            }

            .header-logo {
                width: 20%;
                float: left;
            }

            .header-text {
                width: 60%;
                float: left;
            }

            .header-photo {
                width: 20%;
                float: right;
            }

            .clearfloat {
                clear: both;
            }

            .header-text-1 {
                font-size: 20px;
                text-align: center;
                margin-top: 30px;
                margin-bottom: 0px;

                padding: 0px;
            }

            .header-text-2 {
                font-size: 20px;
                text-align: center;
                margin-top: 0px;
                margin-bottom: 0px;
                padding: 0px;
            }

            .header-text-3 {
                font-size: 15px;
                text-align: center;
                margin-top: 0px;
                margin-bottom: 0px;
                padding: 0px;
            }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 0px;
            }

            table td {
                padding: 1px;
                border: 1px solid black;
            }


        }
    </style>
</head>

<body>
<div class="container">
    <div class="header">
        <div class="header-logo">
            <img src="{{ asset('images/logo96.png') }}" alt="">
        </div>
        <div class="header-text">
            <p class="header-text-1 mb-40">AHMADU BELLO UNIVERSITY, ZARIA</p>
            <p class="q"></p>
            <p class="header-text-2"><strong>Student's Course Registration Form</strong></p>
        </div>
        <div class="header-photo">
            @if(isset($admin))
                <img src="https://static.abu.edu.ng/uploads/student/photos/{{strtoupper($student->matric_number)}}.JPG" alt=""
                     style=" height: 126px; float: right;">
            @else
                <img src="https://static.abu.edu.ng/uploads/student/photos/{{strtoupper($student->matric_number)}}.JPG"
                     alt="" style=" height: 126px; float: right;">
            @endif
        </div>
        <div class="clear"></div>
    </div>
    <br>
    <div class="content">
        <div>
            <table class="table table-bordered">
                <tr>
                    <td width="15%">Name</td>
                    <td width="40%">{{$student->getFullname()}}</td>
                    <td width="15%">Reg.No</td>
                    <td width="30%">{{$student->matric_number}}</td>
                </tr>
                <tr>
                    <td>Faculty</td>
                    <td>{{$student->department()->faculty()->name}}</td>
                    <td>Department</td>
                    <td>{{$student->department()->name}}</td>
                </tr>
                <tr>
                    <td>Programme</td>
                    <td>{{$programme->name}}</td>
                    <td>Session</td>
                    <td>{{$session}}/{{$session+1}}</td>
                </tr>
                <tr>
                    <td>Level</td>
                    <td>{{$student->sessionLevel($session)->short_name}}</td>
                    <td>Date Printed</td>
                    <td>{{\Illuminate\Support\Carbon::now()}}</td>
                </tr>
            </table>
            <div class="col-md-11">
                <p>
                    <strong>{{strtoupper($student->mode_of_entry)=="LV"?$student->sessionLevel($session)->short_name:"First Semester"}}</strong>
                </p>
                <table class="table table-bordered">
                    <tr>
                        <td width="5%">S/N</td>
                        <td width="10%">Code</td>
                        <td>Title</td>
                        <td width="5%">CU</td>
                        <td width="10%">Lecture</td>
                        <td width="10%">Lab</td>
                        <td width="18%">Lecturer's Sign</td>
                    </tr>
                    @php
                        $tcur_fs = 0;
                        $sn = 1;
                    @endphp
                    @foreach($coursesalreadyregistered as $key=>$coursegroup)
                        @php
                            $coursecode = $coursegroup->code;
                            $coursetitle = $coursegroup->title;
                            $courseunit = $coursegroup->unit;
                            $coursesemester = $coursegroup->semester;
                            $course_id = $coursegroup->course_id;
                           $ltgroup = $coursegroup->ltgroup;
                           $lecturegroup = $coursegroup->lbgroup;
                        @endphp
                        @if($coursesemester == "1" || strtoupper($student->mode_of_entry)=="LV")
                            @php
                                $tcur_fs = $tcur_fs + ($courseunit * 1);
                            @endphp
                            <tr class="preview-tr-{{$course_id}}">
                                <td>{{$sn}}</td>
                                <td>{{$coursecode}}</td>
                                <td>{{$coursetitle}}</td>
                                <td>{{$courseunit}}</td>
                                <td>{{$ltgroup}}</td>
                                <td>{{$lecturegroup}}</td>
                                <td></td>
                            </tr>
                            @php $sn = $sn + 1; @endphp
                        @endif
                    @endforeach

                </table>
                <span>Total Credit Units: {{$tcur_fs}}</span>
            </div>

            @php
                $tcur_ss = 0;
                $sn = 1;
            @endphp
            @if(strtoupper($student->mode_of_entry)!="LV")
                <div class="col-md-12">
                    <br>
                    <p><strong>Second Semester</strong></p>
                    <table class="table table-bordered">
                        <tr>
                            <td width="5%">S/N</td>
                            <td width="10%">Code</td>
                            <td>Title</td>
                            <td width="5%">CU</td>
                            <td width="10%">Lecture</td>
                            <td width="10%">Lab</td>
                            <td width="18%">Lecturer's Sign</td>
                        </tr>
                        @foreach($coursesalreadyregistered as $key=>$coursegroup)
                            @php
                                $coursecode = $coursegroup->code;
                                 $coursetitle = $coursegroup->title;
                                 $courseunit = $coursegroup->unit;
                                 $coursesemester = $coursegroup->semester;
                                 $course_id = $coursegroup->course_id;
                                 $ltgroup = $coursegroup->ltgroup;
                                 $lecturegroup = $coursegroup->lbgroup;
                            @endphp
                            @if($coursesemester == "2")
                                @php
                                    $tcur_ss = $tcur_ss + ($courseunit * 1);
                                @endphp
                                <tr class="preview-tr-{{$course_id}}">
                                    <td>{{$sn}}</td>
                                    <td>{{$coursecode}}</td>
                                    <td>{{$coursetitle}}</td>
                                    <td>{{$courseunit}}</td>
                                    <td>{{$ltgroup}}</td>
                                    <td>{{$lecturegroup}}</td>
                                    <td></td>
                                </tr>
                                @php $sn = $sn + 1; @endphp
                            @endif
                        @endforeach
                    </table>
                    <span>Total Credit Units: {{$tcur_ss}}</span>
                </div>
            @endif
            <div>
                <br>
                <table class="table-borderless">
                    <tr>
                        <td>Total Credit Units Registered: {{$tcur_fs + $tcur_ss}}</td>
                    </tr>
                </table>
            </div>

            <br>

            @php
                $active = count($supervisions)>0 ? true: false;
            @endphp


            <div>
                <table class="table-borderless">

                    @if(count($supervisions)>0)
                        <tr>
                            <td>Title of Project/Thesis/Disertation(For Returning
                                Students):
                            </td>
                            <td>
                                {{$supervisions->first()->thesistitle}}
                            </td>
                        </tr>

                        @foreach($supervisions as $supervision)
                            <tr>
                                <td>{{$supervision->supervisortype}} Supervisor Name/Dept:</td>
                                <td>
                                    {{$supervision->title}} {{$supervision->firstname}} {{$supervision->surname}}
                                    / {{$supervision->name}}
                                </td>
                            </tr>
                        @endforeach
                        <tr>
                            <td>Date of Proposed Examination:</td>
                            <td>
                                {{\Carbon\Carbon::parse($supervisions->first()->examdate)->toDateString() }}
                            </td>
                        </tr>

                    @else
                        <tr>
                            <td colspan="2">There is no supervision information available.</td>
                        </tr>
                    @endif


                    @if($programme->programme_type_id >3)
                        <tr>
                            <td>HOD's Name:</td>
                            <td>
                                {{($hodposition) ? $hodposition->title. " ".  $hodposition->firstname." ".$hodposition->surname : ""}}
                            </td>
                        </tr>
                        <tr>
                            <td>Faculty Dean's Name:</td>
                            <td>
                                {{($deanposition) ? $deanposition->title. " ". $deanposition->firstname." ".$deanposition->surname : ""}}
                            </td>
                        </tr>

                        <tr>
                            <td>PG School Dean's Name:</td>
                            <td>
                                {{--                                        {{($spgsdeanposition) ? $spgsdeanposition->title. " ".  $spgsdeanposition->firstname." ".$spgsdeanposition->othernames." ".$spgsdeanposition->surname : ""}}--}}
                            </td>
                        </tr>
                    @endif
                </table>
            </div>
        </div>
    </div>
</div>

</body>
</html>
