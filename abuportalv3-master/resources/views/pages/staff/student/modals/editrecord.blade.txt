<div class="modal fade" id="editRecordModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog bs-example-modal-lg" role="document" style="min-width: 1024px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">
                    Edit Student Record
                    <div class="double-line-bottom-theme-colored-2"></div>
                </h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" action="" method="post" id="updateStudentRecordForm">
                    @csrf
                    <input type="hidden" name="student_id" value="{{ encrypt($student->id) }}">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Matric Number:</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" name="matric_number" value="{{ $student->matric_number }}">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">First Name:</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" name="firstname" value="{{ $student->firstname }}">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Surname:</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" name="surname" value="{{ $student->surname }}">
                                </div>
                            </div>
                        </div>
                    </div>
                        <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Other Names:</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" name="other_names" value="{{ $student->other_names }}">
                                </div>
                            </div>
                        </div>

                            <div class="col-md-4">
                                <div class="form-group">
                            <label for="name" class="col-sm-6 control-label">MatricNo. Gen:</label>
                            <div class="col-sm-6">
                                <select name="matric_gen" id="matric_gen" class="form-control">
                                    <option value="">Select Status</option>
                                    <option value="yes" {{$student->matric_gen=="yes"?"selected":""}}>Yes</option>
                                    <option value="no" {{$student->matric_gen=="no"?"selected":""}}>No</option>
                                </select>
                            </div>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="name" class="col-sm-6 control-label">Student Status:</label>
                            <div class="col-sm-6">
                                <select name="status" id="status" class="form-control">
                                    <option value="">Select Status</option>
                                    <option value="cleared" {{$student->status=="cleared"?"selected":""}}>Cleared</option>
                                    <option value="not cleared" {{$student->status=="not cleared"?"selected":""}}>Not Cleared</option>
                                </select>
                            </div>
                                </div>
                            </div>

                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Application Number:</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" name="application_number" value="{{ $student->application_number }}">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">JAMB No.:</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" name="jamb_number" value="{{ $student->jamb_number }}">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Gender:</label>
                                <div class="col-sm-6">
                                    <select name="gender" id="" class="form-control">
                                        <option value="">Select Gender</option>
                                        <option value="Female" {{$student->gender=="Female"?"selected":""}}>Female</option>
                                        <option value="Male" {{$student->gender=="Male"?"selected":""}}>Male</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Date of Birth:</label>
                                <div class="col-sm-6">
                                    <div class='input-group date'>
                                        <input type='text' class="form-control" name="dob" value="{{ $student->dob }}"  id='datetimepicker3'/>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Country:</label>
                                <div class="col-sm-6">
                                    <select id="country" name="countryid"
                                            class="custom-select form-control {{ $errors->has('countryid')?'is-invalid':'is-valid' }}"
                                            required>
                                        <option value="">--Country--</option>
                                        @foreach(\App\Models\Country::all(['id','name']) as $country)
                                            <option value="{{ $country->id }}" {{ (isset($student->country_id) && $student->country_id ==$country->id)?"Selected":""}}>{{$country->name}}</option>
                                        @endforeach
                                    </select>

                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">State:</label>
                                <div class="col-sm-6">
                                    <select id="state" name="state_id" size=""
                                            class="custom-select form-control {{ $errors->has('state')?'is-invalid':'is-valid' }}"
                                            required>
                                        <option value="">--State--</option>
                                        <option value="0" selected>Not Applicable</option>
                                        @if(isset($student->countryid) && (isset($student->lga_id) && $student->lga_id != 0))
                                            @foreach(\App\Models\Country::find($student->country_id)->hasMany('App\State','country_id')->get()->all() as $state)
                                                @if(isset($student->lga_id))
                                                    <option value="{{$state->id}}" {{ ($state->id==\App\Models\Lga::find($student->lga_id)->belongsTo('App\State','state_id')->first()->id)?"Selected":"" }}>{{$state->name}}</option>
                                                @else
                                                    <option value="{{$state->id}}">{{$state->statename}}</option>
                                                @endif
                                            @endforeach
                                        @else
                                            @foreach(\App\Models\State::all() as $state)
                                                @if(isset($student->lga_id) && $student->lga_id !=0)
                                                    <option value="{{$state->id}}" {{ ($state->id==\App\Models\Lga::find($student->lga_id)->belongsTo('App\Models\State','state_id')->first()->id)?"Selected":"" }}>{{$state->name}}</option>
                                                @else
                                                    <option value="{{$state->id}}">{{$state->name}}</option>
                                                @endif
                                            @endforeach
                                        @endif
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">LGA:</label>
                                <div class="col-sm-6">
                                    <div class='input-group date'>
                                        <select id="lga" name="lgaid"
                                                class="custom-select form-control {{ $errors->has('lgaid')?'is-invalid':'is-valid' }}"
                                                required>
                                            <option value="">--LGA--</option>
                                            @if(isset($student->lga_id) && $student->lga_id !=0)
                                                @foreach(\App\Models\State::find(\App\Models\Lga::find($student->lga_id)->belongsTo('App\Models\State','state_id')->first()->id)->hasMany('App\Models\Lga','state_id')->get()->all() as $lgas)
                                                    <option value="{{ $lgas->id }}" {{ ($lgas->id==$student->lga_id)?"Selected":"" }}>{{$lgas->name}}</option>
                                                @endforeach
                                            @else
                                                <option value="0" selected>Not Applicable</option>
                                            @endif
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Entry Level:</label>
                                <div class="col-sm-6">
                                    <select name="entrylevel"
                                            class="custom-select form-control {{ $errors->has('entrylevel')?'is-invalid':'is-valid' }}"
                                            required>
                                        <option value="">--Entry Level--</option>

                                        @foreach(App\Models\Level::list() as $level)
                                            <option value="{{$level->id}}"  {{$student->entry_level_id==$level->id?"selected":""}}>{{$level->short_name}}{{$level->prog_type_code=="PG"?"-".$level->prog_short_name:""}}</option>
                                        @endforeach
                                    </select>

                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Entry Session:</label>
                                <div class="col-sm-6">
                                    <select name="entrysession"
                                            class="custom-select form-control {{ $errors->has('entrysession')?'is-invalid':'is-valid' }}"
                                            required>
                                        <option value="">--Entry Session--</option>
                                        @for($year = date('Y');$year>date('Y')-10;$year--)
                                            <option value="{{$year}}" {{$student->entry_session==$year?"selected":""}}>{{$year}}/{{$year+1}}</option>
                                        @endfor
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Mode of Entry:</label>
                                <div class="col-sm-6">
                                    <div class='input-group date'>
                                        <select id="mode" name="mode"
                                                class="custom-select form-control {{ $errors->has('lgaid')?'is-invalid':'is-valid' }}"
                                                required>
                                            <option value="">-Select-</option>
                                            <option value="DP" {{ $student->mode_of_entry =="DP"?" selected":"" }}>DP</option>
                                            <option value="HD" {{ $student->mode_of_entry =="HD"?" selected":"" }}>HD</option>
                                            <option value="ND" {{ $student->mode_of_entry =="DP"?" selected":"" }}>ND</option>
                                            <option value="AD" {{ $student->mode_of_entry =="AD"?" selected":"" }}>AD</option>
                                            <option value="LV" {{ $student->mode_of_entry =="LV"?" selected":"" }}>LV</option>
                                            <option value="PG" {{ $student->mode_of_entry =="PG"?" selected":"" }}>PG</option>
                                            <option value="UG" {{ $student->mode_of_entry =="UG"?" selected":"" }}>UG</option>
                                            <option value="PD" {{ $student->mode_of_entry =="PD"?" selected":"" }}>PD</option>

                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Residency:</label>
                                <div class="col-sm-6">
                                    <select name="residency"
                                            class="custom-select form-control {{ $errors->has('residency')?'is-invalid':'is-valid' }}"
                                            required>
                                        <option value="">-Select-</option>
                                        <option value="1" {{$student->residency=="1"?"selected":""}}>Nigerian
                                        </option>
                                        <option value="2" {{$student->residency=="2"?"selected":""}}>Resident
                                            Non Nigerian
                                        </option>
                                        <option value="3" {{$student->residency=="3"?"selected":""}}>Non
                                            Resident Non Nigerian
                                        </option>
                                    </select>

                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Student Enabled:</label>
                                <div class="col-sm-6">
                                    <select name="enabled" id="enabled" class="form-control">
                                        <option value="">Select Status</option>
                                        <option value="Yes" {{$student->enabled=="Yes"?"selected":""}}>Yes</option>
                                        <option value="No" {{$student->enabled=="No"?"selected":""}}>No</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Faculty:</label>
                                <div class="col-sm-6">
                                    <div class='input-group date'>
                                        <select class="custom-select form-control  {{ $errors->has('faculty')?'is-invalid':'is-valid' }}" name="faculty" id="faculty" required>
                                            <option value="">-Select-</option>
                                            @php
                                                $faculties = \App\Models\Faculty::all();
                                                $fid = $student->programme_id?$student->faculty()->id:0;
                                            @endphp
                                            @foreach( $faculties as $faculty)
                                                @php
                                                    $selected = $faculty->id == $fid?"selected":"";
                                                @endphp
                                                <option value="{{$faculty->id}}" {{$selected}}>{{$faculty->name}}</option>
                                            @endforeach
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Department:</label>
                                <div class="col-sm-6">
                                    <select class="custom-select form-control  {{ $errors->has('department')?'is-invalid':'is-valid' }}" name="department" id="department" required>
                                        <option value="">Select...</option>
                                        @php
                                            $departments = \App\Models\Department::orderBy("name");
                                            if($student->programme_id)
                                                $departments = $departments->where("faculty_id","=",$fid)->orderBy("name");
                                            $departments=$departments->get()
                                        @endphp
                                        @foreach($departments  as $department)
                                            @php
                                                if($student->programme())
                                                    $selected = $department->id == $student->programme()->department_id?"selected":"";
                                                else
                                                    $selected ="";
                                            @endphp
                                            <option value="{{$department->id}}" {{$selected}}>{{$department->name}}</option>
                                        @endforeach
                                    </select>

                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="name" class="col-sm-6 control-label">Programme Admitted:</label>
                                <div class="col-sm-6">
                                    <select id="programme" name="programme"
                                            class="custom-select form-control {{ $errors->has('lgaid')?'is-invalid':'is-valid' }}"
                                            required>
                                        @php
                                            $programmes = \App\Models\Programme::orderBy("name");
                                            if($student->programme_id)
                                                $programmes = $programmes->where("department_id","=",$student->programme()->department_id)->orderBy("name");
                                            $programmes=$programmes->get()
                                        @endphp
                                        <option value="">--Programme--</option>
                                        @foreach($programmes as $programme)
                                            <option value="{{ $programme->id }}" {{ ($programme->id==$student->programme_id)?"Selected":"" }}>{{$programme->name}}</option>
                                        @endforeach
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                       <div class="col-md-12 text-right">
{{--                           <button class="btn btn-success" type="submit" name="btnsave"><span--}}
{{--                                   class="icon icon-user-add"></span> Update Student--}}
{{--                           </button>--}}
                       </div>
                    </div>
                </form>
                <p class="alert alert-info" id="messageChangeRecord">

                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default btn-flat" data-dismiss="modal" id="addRecordBtnClose">Close</button>
                <button type="button" class="btn btn-success btn-flat" id="updateStudentRecord">Save changes</button>
            </div>
        </div>
    </div>
</div>
