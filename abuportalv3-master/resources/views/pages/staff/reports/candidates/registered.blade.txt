<?php
/**
 * Created by PhpStorm.
 * User: Galadima
 * Date: 8/9/2018
 * Time: 1:00 PM
 */
?>

@extends("layouts.alt.master")
@section("content")
    <div class="main-section">
        <div class="container">
            <div class="row justify-content-center" style="padding-bottom: 240px;">
                <div class="col-md-12">
                   <form>
                       <div class="col-md-3">
                           <div>
                               <label for="exampleFormControlSelect1">Sort By:</label>
                               <select name="sortby" class="form-control" id="sortby">
                                   <option value="all">Default-Date</option>
                                   <option>Department</option>
                                   <option>Faculty</option>
                                   <option>State</option>
                                   <option>Country</option>
                               </select>

                           </div>
                       </div>
                       <div class="col-md-2">
                           <p style="padding-top: 10px">
                               <div class="form-check form-check-inline">
                                   <input class="form-check-input" {{ $order=="ASC"?"checked":($order==""?"ASC":"") }}  type="radio" name="order" id="inlineRadio1" value="ASC">
                                   <label class="form-check-label"for="inlineRadio1">Ascending</label>
                               </div>
                               <div class="form-check form-check-inline">
                                   <input class="form-check-input" {{ $order=="DSC"?"checked":"" }}  type="radio" name="order" id="inlineRadio2" value="DSC">
                                   <label class="form-check-label" for="inlineRadio2">Descending</label>
                               </div>
                           </p>
                       </div>
                       <div class="col-md-2">
                           <label for="exampleFormControlSelect1">Payment Status:</label>
                           <select name="paymentstatus" class="form-control" id="paymentstatus">
                               <option value="all">All</option>
                               <option {{ $paymentstatus == "Not Paid"?"selected ":"" }}>Not Paid</option>
                               <option {{ $paymentstatus == "Paid"?"selected ":"" }}>Paid</option>
                           </select>
                       </div>
                       <div class="col-md-2">
                           <label for="exampleFormControlSelect1">Submission Status:</label>
                           <select name="submissionstatus" class="form-control" id="submissionstatus">
                               <option value="all">All</option>
                               <option {{ $paymentstatus == "Not Submitted"?"selected ":"" }}>Not Submitted</option>
                               <option {{ $paymentstatus == "Submitted"?"selected ":"" }}>Submitted</option>
                           </select>
                       </div>
                       <div class="col-md-2">
                           <label for="exampleFormControlSelect1">Session:</label>
                           <select name="session" class="form-control" id="session">
                               <option value="all">All</option>
                               @foreach($sessions as $ses)
                                <option {{ $session == $ses->session ?"selected ":"" }}>{{$ses->session}}</option>
                               @endforeach
                           </select>
                           <label for="exampleFormControlSelect1">&nbsp;</label><br>
                           <button class="btn btn-success">Submit</button>
                           <button class="btn btn-success" type="button" id="exportExcel">Export</button>
                       </div>

                   </form>

                </div>

                <div class="col-md-12">
                    <br />
                    <br />
                    <table class="table table-bordered table-responsive" style="font-size: 14px;">
                        <thead>
                        <tr>
                            <th>SN</th>
                            <th>Surname</th>
                            <th>First Name</th>
                            <th>Other Names</th>
                            <th>Email</th>
                            <th>Gender</th>
                            <th>Programme</th>
                            <th>More</th>
                        </tr>
                        </thead>
                        <tbody>
                        @foreach($registered as $reg)
                            <tr>
                                <td>{{ $loop->index+1 }}</td>
                                <td>{{ $reg->surname }}</td>
                                <td>{{ $reg->firstname }}</td>
                                <td>{{ $reg->othernames }}</td>
                                <td>{{ $reg->email }}</td>
                                <td>{{ $reg->gender }}</td>
                                <td>{{ $reg->programme }}</td>
                                <td>
                                    <a class="btn btn-outline-primary more" id="">&hellip;</a>
                                    <div class="house hidden">
                                        <ul>
                                            <li><strong>Date of Birth:</strong>{{ $reg->dateofbirth }}</li>
                                            <li><strong>Department:</strong>{{ $reg->department }}</li>
                                            <li><strong>Faculty:</strong>{{ $reg->faculty }}</li>
                                            <li><strong>LGA:</strong>{{ $reg->lga }}</li>
                                            <li><strong>State:</strong>{{ $reg->state }}</li>
                                            <li><strong>Country:</strong>{{ $reg->country }}</li>
                                            <li><strong>Phone:</strong>{{ $reg->gsm }}</li>
                                            <li><strong>Marital Status:</strong>{{ $reg->maritalstatus }}</li>
                                        </ul>
                                    </div>

                                </td>
                            </tr>
                        @endforeach
                        </tbody>
                    </table>
                </div>
                <div class="col-md-1"></div>
            </div>
        </div>
    </div>
@endsection
@section("js")
    <script>
        jQuery(function(){
            jQuery("body").on("mouseover",".more",function () {
                jQuery(this).next().removeClass("hidden").css("top",jQuery(this).next().css("top")).css("right",jQuery(this).next().width()-jQuery(this).next().css("right"));
            });
            jQuery("body").on("mouseout",".more",function () {
                jQuery(this).next().addClass("hidden");
            });

            jQuery("body").on("click","#exportExcel",function () {
                document.location = "{{ route("candidate.export") }}/?sortby="+jQuery("#sortby").val()
                    +"&paymentstatus="+jQuery("#paymentstatus").val()
                    +"&session="+jQuery("#session").val()+"&submissionstatus"+jQuery("#submissionstatus").val();
            });
        });
    </script>
@endsection
@section("css")
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        .house{
            position: absolute;
            background: #fff;
            border: 1px solid teal;
            padding: 5px;
            right:10px;
            z-index: 1000;
            font-size: 11px;
        }
    </style>
@endsection
