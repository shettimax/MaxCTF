<?php
/**
 * Created by PhpStorm.
 * User: Lwafu
 * Date: 01/09/2018
 * Time: 06:57
 */
?>
@extends('layouts.alt.master')
@section('css')
<link rel="stylesheet" href="{{ asset('DataTables/datatables.min.css') }}">

    <style type="text/css">
        #records {
            overflow-x: auto;
            border-style: solid;
            border-color: #cccccc;
            border-width: 1px;
            border-radius: 5px;
            min-height: 50px;
            padding: 10px;

        }
        input[type='text'].form-control{
            border-radius:0;
        }
        select.form-control:not([size]):not([multiple]) {
            height: calc(1.85rem + 2px);
        }

        #reporttb>tbody>tr>td{
            font-size:13px;
        }

    </style>
@endsection
@section('content')
    @include('pages.staff.reports.filters.basicfilters')
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div id="records">
                  @yield('reporttb')
                </div>
            </div>
        </div>
    </div>
    
@endsection
@section('js')

<script src="{{ asset('DataTables/datatables.min.js') }}"></script>

    <script type="text/javascript">
        
        $.ajax('{{route("reports.getfaculties")}}')
            .done(function (msg) {
                jQuery("#faculty").html("<option value=''>--select--</option>" + msg);
            });
        $.ajax('{{route("reports.getsessions")}}')
            .done(function (msg) {
                jQuery("#session").html("<option value=''>--select--</option>" + msg);
            });
        //Return departments on select of faculty
        jQuery(document).on("change", "#faculty", function (event) {
            jQuery("#department").html("<option value=''>Loading...</option>");
            $.ajax({
                url: '{{route("reports.getdepartments")}}',
                type: 'GET',
                data: {
                    facultyid: jQuery("#faculty").val()
                }
            }).done(function (msg) {
                jQuery("#department").html("<option value=''>--select--</option>" + msg);
                jQuery("#progtype").val("");
                jQuery("#programme").val("");
                jQuery("#session").val("");
                jQuery("#admissionstatus").val("");
            });
        });

        //Return programme types on select of department
        jQuery(document).on("change", "#department", function (event) {
            jQuery("#progtype").html("<option value=''>Loading...</option>");
            $.ajax({
                url: '{{route("reports.getprorammetypes")}}',
                type: 'GET',
                data: {
                    departmentid: jQuery("#department").val()
                }
            }).done(function (msg) {
                jQuery("#progtype").html("<option value=''>--select--</option>" + msg);
                jQuery("#programme").val("");
                jQuery("#session").val("");
                jQuery("#admissionstatus").val("");
            });
        });

        //Return programmes on select of programme type
        jQuery(document).on("change", "#progtype", function (event) {
            jQuery("#programme").html("<option value=''>Loading...</option>");
            $.ajax({
                url: '{{route("reports.getprogrammes")}}',
                type: 'GET',
                data: {
                    facultyid: jQuery("#faculty").val(),
                    departmentid: jQuery("#department").val(),
                    programmetypeid: jQuery("#progtype").val()
                }
            }).done(function (msg) {
                jQuery("#programme").html("<option value=''>--select--</option>" + msg);
                jQuery("#session").val("");
                jQuery("#admissionstatus").val("");
            });
        });

    </script>
@endsection
