<div id="load" style="position: relative;" class="table-responsive">
    <table id="reporttb" class="table table-striped table-bordered table-hover table-condensed nowrap">
        <thead class="thead-light">
        <tr class="text-dark text-uppercase">
            <th>S/N</th>
            @foreach($labels as $label)
                <th>{{$label}}</th>
            @endforeach
        </tr>
        </thead>

        <tbody>
        @foreach ($students as $stud)
            <tr>
                <td>{{$loop->index+1}}</td>
                @php
                    foreach($fields as $field){
                            switch ($field) {
                               case "state_id":
                                   $state = App\Models\State::find($stud->$field)?App\Models\State::find($stud->$field)->name:"";
                                   echo "<td>". $state ."</td>";
                                   break;
                               case "lga_id":
                                   $lg = App\Models\Lga::find($stud->$field)?App\Models\Lga::find($stud->$field)->name:"";
                                   echo "<td>". $lg ."</td>";
                                   break;
                               case "faculty_id":
                                    $fac = App\Models\Faculty::find($stud->$field)?App\Models\Faculty::find($stud->$field)->name:"";
                                   echo "<td>" . $fac . "</td>";
                                   break;
                               case "department_id":
                                   $dept = App\Models\Department::find($stud->$field)?App\Models\Department::find($stud->$field)->name:"";
                                   echo "<td>". $dept ."</td>";
                                   break;
                               case "programme_types.id as prog_type_id":
                                   $progtype = App\Models\ProgrammeType::find($stud->prog_type_id)?App\Models\ProgrammeType::find($stud->prog_type_id)->prog_type_name:"";
                                   echo "<td>". $progtype ."</td>";
                                   break;
                               case "programmes.id as prog_id":
                                   $prog = App\Models\Programme::find($stud->prog_id)?App\Models\Programme::find($stud->prog_id)->name:"";
                                   echo "<td>". $prog ."</td>";
                                   break;
                               case "entry_level_id":
                                   $ent_level = App\Models\Level::find($stud->$field)?App\Models\Level::find($stud->$field)->name:"";
                                   echo "<td>". $ent_level ."</td>";
                                   break;
                               case "level_id":
                                   $lev = App\Models\Level::find($stud->$field)?App\Models\Level::find($stud->$field)->name:"";
                                   echo "<td>". $lev ."</td>";
                                   break;
                               default:
                                   echo "<td>".$stud->$field."</td>";
                           }
                }
                @endphp

            </tr>
        @endforeach
        </tbody>
    </table>
</div>
