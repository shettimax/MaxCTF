<!DOCTYPE html>
<html lang="en">
<head>
    <title>Payslip Distribution</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Google Font: Source Sans Pro -->
    <!-- disable googleapis url: <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
     -->
     
    <link rel="stylesheet" href="{{ asset('assets/css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/css/all.min.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/css/themify-icons.css') }}">

    <style>

        .row{
            flex-wrap: nowrap;
        }

        @media print {


            @page {
                size: A4;   /* auto is the current printer page size */
                margin-top: 0mm;
                margin-bottom: 0mm;
                margin-left: auto;
                margin-right: auto;
            }


            .btn-print{visibility: hidden;}

            .container {
                page-break-inside: avoid;
                page-break-after: always;
            }

            .container:last-child {
                page-break-after: auto;
            }

            .header-text-1 {
                font-size: 18px;
                text-align: center;
                margin-top: 30px;
                margin-bottom: 0px;
                padding: 0px;
            }

            .header-text-2 {
                font-size: 18px;
                text-align: center;
                margin-top: 0px;
                margin-bottom: 0px;
                padding: 0px;
            }

            .header-text-3 {
                font-size: 14px;
                text-align: center;
                margin-top: 0px;
                margin-bottom: 0px;
                padding: 0px;
            }

        }

        p{
            margin-top: 2px;
            margin-bottom: 2px;
        }

        .watermark {
            position: absolute;
            opacity: 0.25;
            font-size:60px;
            width: 100%;
            text-align: center;
            z-index: 1000;
            -webkit-transform: rotate(-45deg);
            -moz-transform: rotate(-45deg);
        }


    </style>

</head>
<body class="hold-transition">
<div class="container mt-4">

<div class="row">
    <div class="col-md-12" style="text-align: right;font-size:10px;margin-bottom: -10px;"><a href="javascript:window.print()" style="border: 1px  #0c5460 solid;font-size:10px; " class="btn btn-default btn-print">Print</a></div>
</div>
<div class="col-md-12" style="text-align: center;"><img src="{{ asset('images/payslip/arm.png') }}" style="width: 75px; height: 75px;">

</div>

<div class="col-md-12" style="text-align: center;"><h1>FEDERAL REPUBLIC OF NIGERIA <br />IPPIS TERTIARY INSTITUTIONS</h1></div>
<div class="col-md-12" style="text-align: center;"><h4>EMPLOYEE PAYSLIP</h4></div>
<div class="col-md-12" style="text-align: center;"><p style="margin-top: 12px; font-weight: bold; font-size: 24px;font-family: sans-serif;">{{ $payslip->month }} {{ $payslip->year }}</p></div>

<div class="row">
    <div class="col-md-2"><p>Employee Name: </p></div>
    <div class="col-md-4"><p style="font-weight: bold;">{{($payslip->employeename)}}</div>
    <div class="col-md-2"><p>Grade:</p></div>
    <div class="col-md-4"><p>{{$payslip->grade}}</p></div>
</div>

<div class="row">
    <div class="col-md-2"><p>IPPIS Number: </p></div>
    <div class="col-md-4"><p>{{$payslip->ippisnum}}</div>
    <div class="col-md-2"><p>Step:</p></div>
    <div class="col-md-4"><p>{{$payslip->step}}</p></div>
</div>

<div class="row">
    <div class="col-md-2"><p>Legacy ID: </p></div>
    <div class="col-md-4"><p>{{($payslip->legacyid)}}</div>
    <div class="col-md-2"><p>Gender:</div>
    <div class="col-md-4"><p>{{$payslip->gender}}</p></div>
</div>

<div class="row">
    <div class="col-md-2"><p>MDA/School/Command: </p></div>
    <div class="col-md-4"><p>{{$payslip->mdaschoolcommand}}</div>
    <div class="col-md-2"><p>Tax State:</div>
    <div class="col-md-4"><p>{{$payslip->taxstate}}</p></div>
</div>

<div class="row">
    <div class="col-md-2"><p>Department: </p></div>
    <div class="col-md-4"><p>{{$payslip->department}}</div>
    <div class="col-md-2"><p>TIN:</div>
    <div class="col-md-4"><p>{{$payslip->tin}}</p></div>
</div>

<div class="row">
    <div class="col-md-2"><p>Location: </p></div>
    <div class="col-md-4"><p>{{$payslip->location}}</div>
    <div class="col-md-2"><p>Date of Appointment:</div>
    <div class="col-md-4"><p>{{$payslip->dateoffirstappointment}}</p></div>
</div>

<div class="row">
    <div class="col-md-2"><p>Job: </p></div>
    <div class="col-md-4"><p>{{$payslip->job}}</div>
    <div class="col-md-2"><p>Date of Birth:</div>
    <div class="col-md-4"><p>{{$payslip->dateofbirth}}</p></div>
</div>
<div class="col-md-9 watermark">CONFIDENTIAL</div>
<div class="row mb-2">
    <div class="col-md-12"><p style="font-weight: bold; text-align: left;">Bank Information Details</p></div>
</div>
<div class="row">
    <div class="col-md-12" style="border-bottom: solid;"></div>
</div>
<div class="row">
    <div class="col-md-2"><p>Bank Name: </p></div>
    <div class="col-md-4"><p>{{$payslip->bankname}}</div>
    <div class="col-md-2"><p>PFA Name: </p></div>
    <div class="col-md-4"><p>{{$payslip->pfaname}}</p></div>
</div>
<div class="row">
    <div class="col-md-2"><p>Account Number: </p></div>
    <div class="col-md-4"><p>{{($payslip->accountnumber)}}</p></div>
    <div class="col-md-2"><p>Pension PIN: </p></div>
    <div class="col-md-4"><p>{{$payslip->pensionpin}}</p></div>
</div>
<div class="row">
    <div class="col-md-12 " style="border-top: solid;"></div>
</div>

<div class="row mt-2">
    <div class="col-md-6"><p style="font-weight: bold;">Gross Earnings Information</p></div>
    <div class="col-md-6"><p style="font-weight: bold;">Gross Deductions Information </p></div>
</div>

<div class="row">
    <div class="col-md-4"><p style="font-weight: bold;">Earnings </p></div>
    <div class="col-md-2" style="text-align: right;"><p style="font-weight: bold;">Amount </p></div>
    <div class="col-md-4"><p style="font-weight: bold;">Dedcutions </p></div>
    <div class="col-md-2" style="text-align: right;"><p style="font-weight: bold;">Amount </p></div>
</div>

@php
    $earnings = explode(":", $payslip->earnings);
    $earnings=array_slice($earnings,0,-1);
    $deductions = explode(":", $payslip->deductions);
    $deductions=array_slice($deductions,0,-2);
    $lena = count($earnings);
    $lenb = count($deductions);
    $len = ($lena > $lenb) ? $lena : $lenb;
    $j = 0;
    // $earntotal = $lena-1;
    // $deducttotal = $lenb-1;
@endphp
@for ($j=0; $j < $len; $j++)
@php
    $earning=isset($earnings[$j])?$earnings[$j]:'';
    $arrearns = preg_split("/[\s]+/", trim($earning));

    $sliced = array_slice($arrearns, 0, -2);
    $stringearnings = implode(" ", $sliced);
    $earnamount = end($arrearns);
    $earnamount=($earnamount!="")?$earnamount:"";

    $deduction=isset($deductions[$j])?$deductions[$j]:'';
    $arrdeducts = preg_split("/[\s]+/", trim($deduction));

    $sliced = array_slice($arrdeducts, 0, -2);
    $stringdeductions = implode(" ", $sliced);
    $deductamount = end($arrdeducts);
    $deductamount=($deductamount!="")?$deductamount:"";
@endphp
<div class="row">
    <div class="col-md-4"><p> {{ $stringearnings }}</p></div>
    <div class="col-md-2" style="text-align: right"><p>@php echo $earnamount==""?"":"&#8358;".$earnamount @endphp </p></div>
    <div class="col-md-4"><p>{{ $stringdeductions }} </p></div>
    <div class="col-md-2" style="text-align: right"><p>@php echo $deductamount==""?"":"&#8358;".$deductamount @endphp </p></div>
</div>
@endfor
@php
    $totalgrossearnings=$payslip->totalgrossearnings;
    $arrtotalgrossearnings = preg_split("/[\s]+/", trim($totalgrossearnings));
    $totalgrossearnings = end($arrtotalgrossearnings);
    $totalgrossearnings = $totalgrossearnings;

    $incometax=$payslip->incometax;
    $arrincometax = preg_split("/[\s]+/", trim($incometax));
    $incometax = end($arrincometax);
    $incometax = $incometax;

    $totalgrossdeductions=$payslip->totalgrossdeductions;
    $arrtotalgrossdeductions = preg_split("/[\s]+/", trim($totalgrossdeductions));
    $totalgrossdeductions = end($arrtotalgrossdeductions);
    $totalgrossdeductions = $totalgrossdeductions;

    $totalnetearnings=$payslip->totalnetearnings;
    $arrtotalnetearnings = preg_split("/[\s]+/", trim($totalnetearnings));
    $totalnetearnings = end($arrtotalnetearnings);
    $totalnetearnings = $totalnetearnings;

@endphp
<div class="row mb-2"></div>
<div class="row">
    <div class="col-md-6"></div>
    <div class="col-md-6" style="border-top: solid;"></div>
</div>
<div class="row mt-2">
    <div class="col-md-6"></div>
    <div class="col-md-6"><p style="font-weight: bold; text-decoration: underline;">Summary of Payments</p></div>
</div>
<div class="row">
    <div class="col-md-4"></div>
    <div class="col-md-2"></div>
    <div class="col-md-4"><p style="font-weight: bold;">Total Gross Earnings: </p></div>
    <div class="col-md-2" style="text-align: right"><p>&#8358;{{ $totalgrossearnings }}</p></div>
</div>
<div class="row">
    <div class="col-md-4"></div>
    <div class="col-md-2"></div>
    <div class="col-md-4"><p style="font-weight: bold;">Income Tax: </p></div>
    <div class="col-md-2" style="text-align: right"><p>&#8358;{{ $incometax }}</p></div>
</div>
<div class="row">
    <div class="col-md-4"></div>
    <div class="col-md-2"></div>
    <div class="col-md-4"><p style="font-weight: bold;">Total Gross Deductions: </p></div>
    <div class="col-md-2" style="text-align: right"><p>&#8358;{{ $totalgrossdeductions }}</p></div>
</div>
<div class="row">
    <div class="col-md-4"></div>
    <div class="col-md-2"></div>
    <div class="col-md-4"><p style="font-weight: bold;">Total Net Earnings: </p></div>
    <div class="col-md-2" style="text-align: right"><p>&#8358;{{ $totalnetearnings }}</p></div>
</div>
    </div>
<!-- /.login-box -->
 
<script class="noprint" src="{{ asset('assets/js/jquery-3.4.1.min.js') }}"></script>
<script class="noprint" src="{{ asset('assets/js/bootstrap.min.js') }}"></script>
 
</body>
</html>

