@inject('Accommodation', 'App\Models\Accommodation')
@extends('layout.staff.master')
@section('css')
<style rel="text/css">
    .table tr td:first-child {
        font-weight: bold;
    }
    .hostelaction{
        margin:5px;
        margin-right:7px;
        min-width: 100px;
    }
    .widgeterror{
        color:#EC391B;
    }
</style>
@endsection
@section('content')
    <section class="">

        <div class="container">
            <div class='row'>
                <div class='col-xs-12 col-md-10'>
                    <div class='row'>
                        <div class='col-xs-1 col-md-3'></div>
                        <div class ='col-xs-10 col-md-6'>
                            <div class='row'>
                                <div class='col-12 text-center'>
                                    <h2 class="text-theme-colored2 font-20">Modify Hostel</h2>
                                </div>
                            </div>

                            <form class='form' name='modifyhostelfrm' id='modifyhostelfrm' action='{{route('accommodation.admin.hostel.modify')}}' method='POST'>
                                @if ($errors->any())
                                    <div class="alert alert-danger">
                                        Fix the errors highlighted.
                                    </div>
                                @endif
                                <div class="form-controls @if($errors->has('hostelname')) has-error @endif">
                                    <label for="hostelname">Hostel Name:
                                        <input type="text" name='hostelname' class="form-control" id="hostelname"  placeholder="Name of Hostel" value='{{$hostel->name}}'></label>
                                    <small id="hostelnameerror" class="widgeterror @if($errors->has('hostelname')) show @else hidden @endif">Name of hostel is required and must be unique</small>
                                </div>
                                <div class="form-controls @if($errors->has('hostelshortname')) has-error @endif">
                                    <label for="hostelshortname">Short Name:
                                        <input type="text" name='hostelshortname' class="form-control" id="hostelshortname" placeholder="Short Name of Hostel" value='{{$hostel->shortname}}'></label>
                                    <small id="hostelshortnameerror" class="widgeterror @if($errors->has('hostelshortname')) show @else hidden @endif">Short name of hostel is required and must be unique</small>
                                </div>
                                <div class="form-controls">
                                    <label for="campus">Campus:
                                        <select name='campus' id='campus' class='form-control'>
                                            <option value='main'>Main Campus</option>
                                            <option value='kongo' @if ($hostel->campus == 'kongo') selected @endif >Kongo Campus</option>
                                            <option value='tudun-wada' @if ($hostel->campus == 'tudun-wada') selected @endif >Tudun-Wada Campus</option>
                                            <option value='shika' @if ($hostel->campus == 'shika') selected @endif >Shika Campus</option>
                                            <option value='site-II' @if ($hostel->campus == 'site-II') selected @endif >Site-II Campus</option>
                                        </select></label>
                                </div>
                                <div class="form-controls @if($errors->has('gender')) has-error @endif">
                                    <label>Gender: </label> <br />
                                    <label class='checkbox-inline'><input type='radio' name='gender' value='male' @if ($hostel->gender == 'male') checked @endif /> Male</label>
                                    <label class='checkbox-inline'><input type='radio' name='gender' value='female' @if ($hostel->gender == 'female') checked @endif /> Female</label>
                                    <label class='checkbox-inline'><input type='radio' name='gender' value='combined' @if ($hostel->gender == 'combined') checked @endif  /> Combined</label>
                                    <small id="gendererror" class="widgeterror @if($errors->has('gender')) show @else hidden @endif">Gender is required.</small>
                                </div>
                                <div class='form-controls @if($errors->has('studtype')) has-error @endif'>
                                    <label>Student Type:</label> <br />
                                    <div class='checkbox'><label><input type='checkbox' name='allstudtype' value='' id='allstudtype' /> All</label></div>
                                    <div class='checkbox'><label><input type='checkbox' name='studtype[]' value='ug' class='stdtype' @if (strpos($hostel->studtype, 'ug_')!==false || strpos($hostel->studtype, 'pg_ug')!==false || $hostel->studtype=='ug' || $hostel->studtype=='all') checked @endif /> Undergraduate</label></div>
                                    <div class='checkbox'><label><input type='checkbox' name='studtype[]' value='lv' class='stdtype' @if (strpos($hostel->studtype, 'lv_')!==false || strpos($hostel->studtype, 'ug_lv')!==false || $hostel->studtype=='lv' || $hostel->studtype=='all') checked @endif /> Long Vocational Course</label></div>
                                    <div class='checkbox'><label><input type='checkbox' name='studtype[]' value='ugd' class='stdtype' @if (strpos($hostel->studtype, 'dp')!==false || strpos($hostel->studtype, '_ugd')!==false || $hostel->studtype=='ugd' || $hostel->studtype=='all') checked @endif /> Undergraduate Diploma</label></div>
                                    <div class='checkbox'><label><input type='checkbox' name='studtype[]' value='pgd' class='stdtype' @if (strpos($hostel->studtype, 'dp')!==false || strpos($hostel->studtype, '_pgd')!==false || $hostel->studtype=='pgd' || $hostel->studtype=='all') checked @endif /> Postgraduate Diploma</label></div>
                                    <div class='checkbox'><label><input type='checkbox' name='studtype[]' value='msc' class='stdtype' @if (strpos($hostel->studtype, 'pg')!==false || $hostel->studtype=='all') checked @endif/> Postgraduate (Masters & PhD</label></div>
                                    <small id="studtypeerror" class="widgeterror @if($errors->has('studtype')) show @else hidden @endif">Select student category for the hostel</small>
                                </div>
                                <div class="form-controls @if($errors->has('hostelfee')) has-error @endif">
                                    <label for="hostelfee">Hostel Fee (&#8358;):</label>
                                    <div class='input-group'>
                                        <span class="input-group-addon">&#8358;</span>
                                        <input type="text" name='hostelfee' class="form-control" id="hostelfee"  placeholder="Hostel Fee" value='{{$hostel->fee}}'>
                                    </div>
                                    <small id="hostelfeeerror" class="widgeterror @if($errors->has('hostelfee')) show @else hidden @endif">Specify hostel fee.</small>
                                </div>
                                <div class="form-controls">
                                    <label>Status</label> <br />
                                    <label class='checkbox-inline'><input type='radio' name='status' value='1' @if ($hostel->status == '1') checked @endif /> Available</label>
                                    <label class='checkbox-inline'><input type='radio' name='status' value='0' @if ($hostel->status == '0') checked @endif/> Unavailable</label>
                                </div>
                                <input type='hidden' name='_token' value='{{csrf_token()}}' />
                                <input type='hidden' name='hostelid' value='{{$hostel->id}}' />
                                <input type='submit' name='submit' value='Modify Hostel' class='btn btn-primary'/>
                                <br /><br />
                            </form>
                        </div>
                        <div class='col-xs-1 col-md-3'></div>
                    </div>
                </div>
                <div class='col-xs-12 col-md-1'>
                    <a href="{{route('accommodation.admin.hostel.index')}}" class="hostelaction btn btn-sm btn-default"><i class='icon icon-list6 icon-2x'></i> Back to Hostels</a> <br />
                </div>
            </div>
        </div>
    </section>
@endsection
@section('js')
<script type='text/javascript'>
    $(document).on('click', '#allstudtype', function (event) {
        dis = $(this);
        $('.stdtype').prop('checked', dis.prop('checked'));
    });
    $(document).on('click', '.stdtype', function (event) {
        dis = $(this);
        if (dis.prop('checked') == false) {
            $('#allstudtype').prop('checked', false);
        } else {
            $('#allstudtype').prop('checked', ($('.stdtype').filter(function (index) {
                return !($(this).prop('checked'));
            })).size() == 0);
        }
    })
</script>
@endsection
