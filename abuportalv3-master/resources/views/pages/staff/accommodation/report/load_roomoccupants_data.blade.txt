<div id="load" style="position: relative;" class="table-responsive">
    @php
    $statusColors = [
    'PAID' => '#008822',
    'REVOKED' => 'orange',
    'EXPIRED' => 'maroon',
    'RESERVED' => '#4a95dc',
    'CANCELLED' => '#999'
    ];
    @endphp

    <table id="reporttb" class="table table-striped table-bordered table-hover table-condensed nowrap">
        <thead class="thead-light">
            <tr>
                <th>#</th>
                <th>Hostel</th>
                <th>Block</th>
                <th>Room</th>
                <th>Bed Space</th>
                <th>Occupants (Matric - Status)</th>
                <th>Number of Occupants</th>
            </tr>
        </thead>
        <tbody>
            @forelse ($rooms as $index => $room)
            <tr>
                <td>{{ $index + 1 }}</td>
                <td>{{ $room->hostel_name }}</td>
                <td>{{ $room->block_name }}</td>
                <td>{{ $room->room_name }}</td>
                <td>{{ $room->bed_space }}</td>
                <td>
                    @foreach(explode(',', $room->matric_status_list) as $item)
                    @php
                    $parts = explode(' - ', trim($item));
                    $matric = $parts[0] ?? '';
                    $status = strtoupper(trim($parts[1] ?? ''));
                    $color = $statusColors[$status] ?? '#333';
                    @endphp


                    <a href="{{ route('student.search.view', $matric) }}" target="_blank" rel="noopener noreferrer"
                        class="badge text-decoration-none mb-1" style="background-color: {{ $color }};"
                        title="{{ ucfirst(strtolower($status)) }}">
                        {{ strtoupper($matric) }}
                    </a>
                    @endforeach
                    @if(empty($room->matric_status_list))
                    <span class="text-muted">No Occupants</span>
                    @endif
                </td>
                <td>{{ $room->total_occupants }}</td>
            </tr>
            @empty
            <tr>
                <td colspan="5" class="text-center text-danger">No records found.</td>
            </tr>
            @endforelse
        </tbody>
    </table>

</div>